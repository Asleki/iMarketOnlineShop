<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .container {
            max-width: 1200px;
        }
        .product-card {
            min-width: 280px;
            max-width: 280px;
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col items-center p-4 min-h-screen">

    <!-- Main Product Container -->
    <div id="product-details-container" class="container bg-white p-6 rounded-2xl shadow-lg mt-8">
        <!-- Content will be rendered here by JavaScript -->
    </div>

    <!-- You May Also Like Section -->
    <div class="container mt-12">
        <h2 class="text-3xl font-bold mb-6 text-gray-800">You May Also Like</h2>
        <div id="you-may-also-like" class="flex overflow-x-auto gap-6 pb-4 scroll-smooth">
            <!-- Related products will be rendered here by JavaScript -->
        </div>
    </div>

    <script>
        // Data for different product types
        const allProductsData = {
            "vehicles": [
                {
                    "id": "bugatti-tourbillon",
                    "type": "vehicle",
                    "make": "Bugatti",
                    "model": "Tourbillon",
                    "year": 2024,
                    "color": "Grey & Blue",
                    "price": 400000000,
                    "engine_type": "8.3L V16 Hybrid Petrol",
                    "features": [
                        "Naturally Aspirated V16 Engine",
                        "Hybrid Powertrain",
                        "Open-faced Instrument Cluster",
                        "Advanced Aerodynamics",
                        "Carbon Fiber Monocoque",
                        "Exclusive Interior Materials"
                    ],
                    "number_of_doors": 2,
                    "seating_capacity": 2,
                    "fuel_efficiency": {
                        "city_km_per_liter": 3.0,
                        "highway_km_per_liter": 5.5
                    },
                    "shipping_fee": 7000000,
                    "imported": true,
                    "vat_included": true,
                    "waiting_period_days": 730,
                    "car_display_image": "https://placehold.co/800x600/1e293b/fff?text=Bugatti+Tourbillon",
                    "images": [
                        "https://placehold.co/800x600/1e293b/fff?text=Bugatti+Tourbillon",
                        "https://placehold.co/600x400/334155/fff?text=Tourbillon+1",
                        "https://placehold.co/600x400/475569/fff?text=Tourbillon+2",
                        "https://placehold.co/600x400/64748b/fff?text=Tourbillon+3",
                        "https://placehold.co/600x400/94a3b8/fff?text=Tourbillon+4"
                    ],
                    "interior_images": [
                        "https://placehold.co/600x400/94a3b8/fff?text=Interior+1",
                        "https://placehold.co/600x400/475569/fff?text=Interior+2",
                        "https://placehold.co/600x400/334155/fff?text=Interior+3"
                    ],
                    "electric": false,
                    "contact_agent": {
                        "name": "John Kamau",
                        "tel": "0700990007",
                        "location": "Muthaiga, Nairobi"
                    },
                    "car_type": "Sports Car"
                },
                {
                    "id": "mercedes-benz-amg-gt",
                    "type": "vehicle",
                    "make": "Mercedes-Benz",
                    "model": "AMG GT",
                    "year": 2024,
                    "color": "Obsidian Black",
                    "price": 35000000,
                    "engine_type": "4.0L V8 Bi-turbo",
                    "features": [
                        "AMG Ride Control",
                        "Burmester Surround Sound",
                        "Nappa Leather Interior",
                        "Active Aerodynamics"
                    ],
                    "number_of_doors": 2,
                    "seating_capacity": 4,
                    "fuel_efficiency": {
                        "city_km_per_liter": 6.5,
                        "highway_km_per_liter": 9.2
                    },
                    "shipping_fee": 500000,
                    "imported": true,
                    "vat_included": true,
                    "waiting_period_days": 180,
                    "car_display_image": "https://placehold.co/800x600/334155/fff?text=Mercedes+AMG+GT",
                    "images": [
                        "https://placehold.co/800x600/334155/fff?text=Mercedes+AMG+GT"
                    ],
                    "interior_images": [
                        "https://placehold.co/600x400/334155/fff?text=AMG+GT+Interior"
                    ],
                    "electric": false,
                    "contact_agent": {
                        "name": "Jane Wanjiru",
                        "tel": "0701234567",
                        "location": "Westlands, Nairobi"
                    },
                    "car_type": "Grand Tourer"
                },
            ],
            "motorcycles": [
                {
                    "id": "ducati-panigale-v4",
                    "type": "motorcycle",
                    "make": "Ducati",
                    "model": "Panigale V4",
                    "year": 2024,
                    "color": "Ducati Red",
                    "price": 4500000,
                    "engine_type": "998cc V4 Desmosedici Stradale",
                    "features": [
                        "Cornering ABS EVO",
                        "Ducati Traction Control EVO",
                        "Ducati Wheelie Control EVO",
                        "Ducati Slide Control"
                    ],
                    "shipping_fee": 150000,
                    "imported": true,
                    "vat_included": true,
                    "waiting_period_days": 90,
                    "display_image": "https://placehold.co/800x600/b91c1c/fff?text=Ducati+Panigale+V4",
                    "images": [
                        "https://placehold.co/800x600/b91c1c/fff?text=Ducati+Panigale+V4",
                        "https://placehold.co/600x400/ef4444/fff?text=Panigale+2"
                    ],
                    "contact_agent": {
                        "name": "Peter Mwangi",
                        "tel": "0702345678",
                        "location": "Kilimani, Nairobi"
                    },
                    "bike_type": "Superbike"
                },
                {
                    "id": "kawasaki-ninja-zx-10r",
                    "type": "motorcycle",
                    "make": "Kawasaki",
                    "model": "Ninja ZX-10R",
                    "year": 2023,
                    "color": "Lime Green",
                    "price": 3800000,
                    "engine_type": "998cc In-Line Four",
                    "features": [
                        "Integrated Riding Modes",
                        "Ã–hlins Electronic Steering Damper",
                        "Kawasaki Quick Shifter"
                    ],
                    "shipping_fee": 120000,
                    "imported": true,
                    "vat_included": true,
                    "waiting_period_days": 60,
                    "display_image": "https://placehold.co/800x600/16a34a/fff?text=Kawasaki+Ninja+ZX-10R",
                    "images": [
                        "https://placehold.co/800x600/16a34a/fff?text=Kawasaki+Ninja+ZX-10R"
                    ],
                    "contact_agent": {
                        "name": "Peter Mwangi",
                        "tel": "0702345678",
                        "location": "Kilimani, Nairobi"
                    },
                    "bike_type": "Sport"
                }
            ],
            "automotive-parts": [
                {
                    "id": "brembo-brake-kit",
                    "type": "automotive-part",
                    "name": "Brembo Big Brake Kit",
                    "part_for": "Various Vehicles",
                    "price": 500000,
                    "shipping_fee": 10000,
                    "description": "High-performance brake kit for superior stopping power. Includes calipers, rotors, and pads.",
                    "imported": true,
                    "vat_included": true,
                    "display_image": "https://placehold.co/800x600/374151/fff?text=Brembo+Brake+Kit",
                    "images": [
                        "https://placehold.co/800x600/374151/fff?text=Brembo+Brake+Kit",
                        "https://placehold.co/600x400/4b5563/fff?text=Brembo+2"
                    ],
                    "contact_agent": {
                        "name": "Sarah Omondi",
                        "tel": "0703456789",
                        "location": "Industrial Area, Nairobi"
                    }
                },
                {
                    "id": "michelin-pilot-sport-4s",
                    "type": "automotive-part",
                    "name": "Michelin Pilot Sport 4S Tire",
                    "part_for": "Various Vehicles",
                    "price": 80000,
                    "shipping_fee": 5000,
                    "description": "Ultra-high performance tire for exceptional grip and handling in all conditions.",
                    "imported": false,
                    "vat_included": true,
                    "display_image": "https://placehold.co/800x600/6b7280/fff?text=Michelin+Pilot",
                    "images": [
                        "https://placehold.co/800x600/6b7280/fff?text=Michelin+Pilot"
                    ],
                    "contact_agent": {
                        "name": "Sarah Omondi",
                        "tel": "0703456789",
                        "location": "Industrial Area, Nairobi"
                    }
                }
            ]
        };

        const kshFormatter = new Intl.NumberFormat('en-KE', {
            style: 'currency',
            currency: 'KES',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        });

        // Function to render a single product based on its type
        function renderProduct(product) {
            const container = document.getElementById('product-details-container');
            if (!container) return;
            
            let htmlContent = '';
            
            // Render specific template based on product type
            switch (product.type) {
                case 'vehicle':
                    htmlContent = renderVehicle(product);
                    break;
                case 'motorcycle':
                    htmlContent = renderMotorcycle(product);
                    break;
                case 'automotive-part':
                    htmlContent = renderAutomotivePart(product);
                    break;
                default:
                    htmlContent = `<p class="text-gray-600">Product not found or invalid type.</p>`;
            }
            
            container.innerHTML = htmlContent;
        }

        // Helper function to create an icon span with a tooltip
        function createIconSpan(iconClass, text) {
            return `
                <span class="flex items-center text-gray-600 text-sm font-semibold whitespace-nowrap">
                    <i class="${iconClass} text-green-600 mr-2"></i>
                    ${text}
                </span>
            `;
        }

        function renderVehicle(product) {
            return `
                <a href="#" class="inline-flex items-center mb-6 text-blue-600 hover:underline">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Back to Vehicles
                </a>

                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Images Section -->
                    <div class="space-y-4">
                        <div class="relative w-full h-96">
                            <img src="${product.car_display_image}" alt="${product.make} ${product.model}" class="w-full h-full object-cover rounded-xl border-4 border-gray-200 shadow-md">
                        </div>
                        <div class="flex overflow-x-auto gap-4 scroll-smooth pb-2">
                            ${product.images.map(image => `
                                <img src="${image}" alt="Thumbnail" class="w-24 h-24 object-cover rounded-xl border-2 border-gray-300 hover:border-blue-500 cursor-pointer transition-colors duration-200">
                            `).join('')}
                            ${product.interior_images.map(image => `
                                <img src="${image}" alt="Interior Thumbnail" class="w-24 h-24 object-cover rounded-xl border-2 border-gray-300 hover:border-blue-500 cursor-pointer transition-colors duration-200">
                            `).join('')}
                        </div>
                    </div>

                    <!-- Details Section -->
                    <div>
                        <h1 class="text-4xl font-extrabold text-gray-900 leading-tight">${product.make} ${product.model} (${product.year})</h1>
                        <p class="text-4xl font-bold text-green-600 mt-2">${kshFormatter.format(product.price)}</p>

                        <div class="mt-6 space-y-3">
                            ${createIconSpan('fas fa-fill-drip', product.color)}
                            ${createIconSpan('fas fa-cogs', product.engine_type)}
                            ${createIconSpan('fas fa-door-closed', `${product.number_of_doors} Doors`)}
                            ${createIconSpan('fas fa-chair', `${product.seating_capacity} Seats`)}
                            ${product.imported ? createIconSpan('fas fa-globe', 'Imported') : ''}
                            ${product.vat_included ? createIconSpan('fas fa-percent', 'VAT Included') : ''}
                            ${createIconSpan('fas fa-shipping-fast', `Shipping Fee: ${kshFormatter.format(product.shipping_fee)}`)}
                            ${createIconSpan('fas fa-calendar-alt', `Waiting Period: ${product.waiting_period_days} days`)}
                        </div>

                        <!-- Fuel Efficiency -->
                        <div class="mt-8 border-t pt-6 border-gray-200">
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">Fuel Efficiency</h3>
                            <div class="grid grid-cols-2 gap-4">
                                ${createIconSpan('fas fa-city', `City: ${product.fuel_efficiency.city_km_per_liter} km/L`)}
                                ${createIconSpan('fas fa-road', `Highway: ${product.fuel_efficiency.highway_km_per_liter} km/L`)}
                            </div>
                        </div>

                        <!-- Key Features -->
                        <div class="mt-8 border-t pt-6 border-gray-200">
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">Key Features</h3>
                            <div class="grid sm:grid-cols-2 gap-4">
                                ${product.features.map(feature => `
                                    <div class="flex items-center text-gray-700">
                                        <div class="w-5 h-5 rounded-full bg-green-500 flex items-center justify-center mr-3">
                                            <i class="fas fa-check text-white text-xs"></i>
                                        </div>
                                        <span>${feature}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <!-- Contact Agent -->
                        <div class="mt-8 border-t pt-6 border-gray-200">
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">Contact Agent</h3>
                            <div class="space-y-2">
                                ${createIconSpan('fas fa-user-circle', product.contact_agent.name)}
                                ${createIconSpan('fas fa-map-marker-alt', product.contact_agent.location)}
                                ${createIconSpan('fas fa-phone-alt', product.contact_agent.tel)}
                            </div>
                            <button class="mt-6 w-full py-3 px-6 bg-green-600 text-white font-bold rounded-lg shadow-md hover:bg-green-700 transition duration-300">
                                Inquire Now
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMotorcycle(product) {
            return `
                <a href="#" class="inline-flex items-center mb-6 text-blue-600 hover:underline">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Back to Motorcycles
                </a>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="space-y-4">
                        <div class="relative w-full h-96">
                            <img src="${product.display_image}" alt="${product.make} ${product.model}" class="w-full h-full object-cover rounded-xl border-4 border-gray-200 shadow-md">
                        </div>
                        <div class="flex overflow-x-auto gap-4 scroll-smooth pb-2">
                            ${product.images.map(image => `
                                <img src="${image}" alt="Thumbnail" class="w-24 h-24 object-cover rounded-xl border-2 border-gray-300 hover:border-blue-500 cursor-pointer transition-colors duration-200">
                            `).join('')}
                        </div>
                    </div>
                    <div>
                        <h1 class="text-4xl font-extrabold text-gray-900 leading-tight">${product.make} ${product.model} (${product.year})</h1>
                        <p class="text-4xl font-bold text-green-600 mt-2">${kshFormatter.format(product.price)}</p>

                        <div class="mt-6 space-y-3">
                            ${createIconSpan('fas fa-fill-drip', product.color)}
                            ${createIconSpan('fas fa-cogs', product.engine_type)}
                            ${product.imported ? createIconSpan('fas fa-globe', 'Imported') : ''}
                            ${product.vat_included ? createIconSpan('fas fa-percent', 'VAT Included') : ''}
                            ${createIconSpan('fas fa-shipping-fast', `Shipping Fee: ${kshFormatter.format(product.shipping_fee)}`)}
                            ${createIconSpan('fas fa-calendar-alt', `Waiting Period: ${product.waiting_period_days} days`)}
                        </div>

                        <div class="mt-8 border-t pt-6 border-gray-200">
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">Key Features</h3>
                            <div class="grid sm:grid-cols-2 gap-4">
                                ${product.features.map(feature => `
                                    <div class="flex items-center text-gray-700">
                                        <div class="w-5 h-5 rounded-full bg-green-500 flex items-center justify-center mr-3">
                                            <i class="fas fa-check text-white text-xs"></i>
                                        </div>
                                        <span>${feature}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <div class="mt-8 border-t pt-6 border-gray-200">
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">Contact Agent</h3>
                            <div class="space-y-2">
                                ${createIconSpan('fas fa-user-circle', product.contact_agent.name)}
                                ${createIconSpan('fas fa-map-marker-alt', product.contact_agent.location)}
                                ${createIconSpan('fas fa-phone-alt', product.contact_agent.tel)}
                            </div>
                            <button class="mt-6 w-full py-3 px-6 bg-green-600 text-white font-bold rounded-lg shadow-md hover:bg-green-700 transition duration-300">
                                Inquire Now
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function renderAutomotivePart(product) {
            return `
                <a href="#" class="inline-flex items-center mb-6 text-blue-600 hover:underline">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Back to Parts
                </a>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="space-y-4">
                        <div class="relative w-full h-96">
                            <img src="${product.display_image}" alt="${product.name}" class="w-full h-full object-cover rounded-xl border-4 border-gray-200 shadow-md">
                        </div>
                        <div class="flex overflow-x-auto gap-4 scroll-smooth pb-2">
                            ${product.images.map(image => `
                                <img src="${image}" alt="Thumbnail" class="w-24 h-24 object-cover rounded-xl border-2 border-gray-300 hover:border-blue-500 cursor-pointer transition-colors duration-200">
                            `).join('')}
                        </div>
                    </div>
                    <div>
                        <h1 class="text-4xl font-extrabold text-gray-900 leading-tight">${product.name}</h1>
                        <p class="text-4xl font-bold text-green-600 mt-2">${kshFormatter.format(product.price)}</p>

                        <div class="mt-6 space-y-3">
                            <p class="text-gray-700 text-lg">${product.description}</p>
                            ${createIconSpan('fas fa-car-side', `For: ${product.part_for}`)}
                            ${product.imported ? createIconSpan('fas fa-globe', 'Imported') : ''}
                            ${product.vat_included ? createIconSpan('fas fa-percent', 'VAT Included') : ''}
                            ${createIconSpan('fas fa-shipping-fast', `Shipping Fee: ${kshFormatter.format(product.shipping_fee)}`)}
                        </div>
                        
                        <div class="mt-8 border-t pt-6 border-gray-200">
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">Contact Agent</h3>
                            <div class="space-y-2">
                                ${createIconSpan('fas fa-user-circle', product.contact_agent.name)}
                                ${createIconSpan('fas fa-map-marker-alt', product.contact_agent.location)}
                                ${createIconSpan('fas fa-phone-alt', product.contact_agent.tel)}
                            </div>
                            <button class="mt-6 w-full py-3 px-6 bg-green-600 text-white font-bold rounded-lg shadow-md hover:bg-green-700 transition duration-300">
                                Inquire Now
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Function to render the "You may also like" section
        function renderYouMayAlsoLike(currentProduct) {
            const youMayAlsoLikeContainer = document.getElementById('you-may-also-like');
            if (!youMayAlsoLikeContainer) return;

            const allOtherProducts = Object.values(allProductsData).flat().filter(p => p.id !== currentProduct.id);
            const shuffled = allOtherProducts.sort(() => 0.5 - Math.random());
            const selectedProducts = shuffled.slice(0, 4);

            youMayAlsoLikeContainer.innerHTML = selectedProducts.map(product => {
                const isVehicle = product.type === 'vehicle';
                const imageSrc = isVehicle ? product.car_display_image : product.display_image;
                const title = isVehicle ? `${product.make} ${product.model}` : product.name;
                const price = kshFormatter.format(product.price);
                
                return `
                    <div class="product-card bg-white p-4 rounded-xl shadow-md border-2 border-gray-200 flex-shrink-0">
                        <img src="${imageSrc}" alt="${title}" class="w-full h-40 object-cover rounded-xl border-2 border-gray-300">
                        <div class="mt-4">
                            <h3 class="font-bold text-lg truncate">${title}</h3>
                            <p class="text-green-600 font-semibold">${price}</p>
                        </div>
                        <button onclick="renderSelectedProduct('${product.id}')" class="mt-4 w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-300">
                            View Details
                        </button>
                    </div>
                `;
            }).join('');
        }

        // Main function to handle product rendering on click
        function renderSelectedProduct(productId) {
            const allProducts = Object.values(allProductsData).flat();
            const product = allProducts.find(p => p.id === productId);

            if (product) {
                renderProduct(product);
                renderYouMayAlsoLike(product);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
                document.getElementById('product-details-container').innerHTML = `<p class="text-gray-600 text-center">Sorry, the selected product was not found.</p>`;
                document.getElementById('you-may-also-like').innerHTML = '';
            }
        }

        // Initial rendering on page load. Simulates loading the Bugatti page.
        document.addEventListener('DOMContentLoaded', () => {
            renderSelectedProduct('bugatti-tourbillon');
        });
    </script>
</body>
</html>
